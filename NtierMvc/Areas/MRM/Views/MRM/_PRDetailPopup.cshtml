@model NtierMvc.Model.MRM.PRDetailEntity
@{
    ViewBag.Title = "PR Details";
}

<input type="text" id="tableSelected" hidden />
<input type="text" id="HiddenLoggedInDeptName" hidden />
@Html.HiddenFor(m => m.DeptName, new { @id = "HiddenDeptNamePRDetails" })
@Html.HiddenFor(m => m.PRSetno, new { @id = "HiddenPRSetno" })
@Html.HiddenFor(m => m.SignStatus, new { @id = "HiddenSignStatusPRDetails" })
@Html.HiddenFor(m => m.PRStatus, new { @id = "HiddenPRStatusPRDetails" })
@*@Html.HiddenFor(m => m.EntryPerson, new { @id = "HiddenEntryPersonPRDetails" })*@
@Html.HiddenFor(m => m.ApprovePerson1, new { @id = "HiddenApprovePerson1PRDetails" })
@Html.HiddenFor(m => m.ApprovePerson2, new { @id = "HiddenApprovePerson2PRDetails" })

<div class="row">
    <div class="col-md-3">

    </div>
    <div class="col-md-1 ml-auto pr-2 text-right">
        <img src="~/Images/Common/@ViewBag.Logo" alt="Company Logo" />
    </div>
    <div class="col-md-7 p-0 pt-2">
        <h3>@ViewBag.CompanyName</h3>
        <div class="row">
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-1">
                        Address:
                    </div>
                    <div class="col-md-10">
                        @ViewBag.Address1
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-1">

                    </div>
                    <div class="col-md-10">
                        @ViewBag.Address2
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-1">

                    </div>
                    <div class="col-md-10">
                        @ViewBag.Address3
                    </div>
                </div>
                @if (ViewBag.Phone != null)
                {
                    <div class="row">
                        <div class="col-md-1">
                            Phone:
                        </div>
                        <div class="col-md-10">
                            @ViewBag.Phone
                        </div>
                    </div>
                }
                <div class="row">
                    <div class="col-md-1">
                        Mobile:
                    </div>
                    <div class="col-md-10">
                        @ViewBag.Mobile
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-1">
                        Email:
                    </div>
                    <div class="col-md-10">
                        @ViewBag.Email1
                    </div>
                </div>
                @if (ViewBag.Email2 != null)
                {
                    <div class="row">
                        <div class="col-md-1">
                        </div>
                        <div class="col-md-10">
                            @ViewBag.Email2
                        </div>
                    </div>
                }
                @if (ViewBag.Email3 != null)
                {
                    <div class="row">
                        <div class="col-md-1">
                        </div>
                        <div class="col-md-10">
                            @ViewBag.Email3
                        </div>
                    </div>
                }

                <div class="row">
                    <div class="col-md-1">
                        Website:
                    </div>
                    <div class="col-md-10">
                        @ViewBag.Website
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<div ng-controller="MRMController" class="row">
    <form id="formPRDetails" class="mt-5">
        <div class="col-md-12">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-inline pull-right">
                        <div class="form-group">
                            <label for="PRNo">PR No :</label>
                            @Html.TextBoxFor(m => m.PRno, new
                       {
                           @class = "form-control ml-3 requiredValidation",
                           @id = "PRNoPRDetails",
                           @readonly = "readonly",
                           @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                       })
                        </div>
                        <div class="form-group ml-4">
                            <label for="PRDate">PR Date :</label>
                            @Html.TextBoxFor(m => m.PRdate, new
                       {
                           @class = "form-control ml-3 mr-2 requiredValidation",
                           @id = "PRDatePRDetails",
                           @readonly = "readonly",
                           @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                       })
                        </div>

                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-inline">
                        <div class="form-group">
                            <label for="RequestFrom" style="font-size: large;">Request by :</label>
                            @Html.TextBoxFor(m => m.ReqFrom, new
                                   {
                                       @class = "form-control ml-3 requiredValidation",
                                       @id = "RequestFromPRDetails",
                                       @readonly = "readonly",
                                       @style = "font-size: large",
                                       @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                                   })
                        </div>
                        <div class="form-group mt-4" style="margin-left: 670px">
                            <label for="RequestTo" style="font-size: large;">Request To :</label>
                            @Html.TextBoxFor(m => m.ReqTo, new
                                   {
                                       @class = "form-control ml-3 requiredValidation",
                                       @id = "RequestToPRDetails",
                                       @readonly = "readonly",
                                       @Value = "Purchase",
                                       @style = "font-size: large",
                                       @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                                   })
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group mt-4">
                        @Html.DropDownListFor(m => m.PRcat, new SelectList(@ViewBag.ListPRCat, "DataStringValueField", "DataTextField", Model.PRcat),
                            new
                            {
                                @class = "form-control requiredValidation clearField",
                                @id = "PRCatPRDetails",
                                @data_inneraction = "validationCall",
                                @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)",
                                @onchange = "RadioListChange()"
                            })
                    </div>                    
                </div>
            </div>
            <div class="row mt-5">
                <div class="col-md-12">
                    <div class="form-inline">
                        <div class="form-group">
                            <label for="CurrencyPRDetails">Curr</label>
                            @Html.DropDownListFor(m => m.Currency, new SelectList(@ViewBag.ListCurrency, "DataStringValueField", "DataTextField", "Select"), new
                                {
                                    @class = "form-control ml-2 requiredValidation clearField",
                                    @id = "CurrencyPRDetails",
                                    @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                                })
                        </div>
                        <div class="form-group ml-3">
                            <label for="PriorityPRDetails">Priority</label>
                            @Html.DropDownListFor(m => m.Priority, new SelectList(@ViewBag.ListPriority, "DataStringValueField", "DataTextField", "Select"), new
                                {
                                    @class = "form-control ml-2 requiredValidation clearField",
                                    @id = "PriorityPRDetails",
                                    @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                                })
                        </div>
                        <div class="form-group ml-3">
                            <label for="EndUsePRDetails">End Use</label>
                            @Html.DropDownListFor(m => m.EndUse, new SelectList(@ViewBag.ListEndUse, "DataStringValueField", "DataTextField", "Select"), new
                                {
                                    @class = "form-control ml-2 requiredValidation clearField",
                                    @id = "EndUsePRDetails",
                                    @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)",
                                    @onchange = "changeEndUseNo()"
                                })
                        </div>
                        <div class="form-group ml-3" id="QuoteTypeDiv">
                            <label for="QuoteTypePRDetails">Quote Type</label>
                            @Html.DropDownListFor(m => m.QuoteType, new SelectList(@ViewBag.ListQuoteType, "DataStringValueField", "DataTextField", "Select"), new
                                {
                                    @class = "form-control ml-2 clearField",
                                    @id = "QuoteTypePRDetails",
                                    @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)",
                                    @onchange = "changeQuoteType()"
                                })
                        </div>
                        <div class="form-group ml-3">
                            <label for="EndUseNosPRDetails">End Use No</label>
                            @Html.DropDownListFor(m => m.EndUseNo, new SelectList(@ViewBag.ListEndUseNo, "DataStringValueField", "DataTextField", "Select"), new
                                {
                                    @class = "form-control ml-2 clearField",
                                    @id = "EndUseNosPRDetails",
                                    @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                                })
                        </div>
                        <div class="form-group ml-3">
                            <label for="CostCenterPRDetails">Cost Centre</label>
                            @Html.DropDownListFor(m => m.CostCenter, new SelectList(@ViewBag.ListCostCenter, "DataStringValueField", "DataTextField", "Select"), new
                                {
                                    @class = "form-control ml-2 requiredValidation clearField",
                                    @id = "CostCenterPRDetails",
                                    @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                                })
                        </div>
                        <div class="form-group ml-3">
                            <label for="RMCatPRDetails">RM-Cat</label>
                            @Html.DropDownListFor(m => m.RMcat, new SelectList(@ViewBag.ListRMcat, "DataStringValueField", "DataTextField", "Select"), new
                                {
                                    @class = "form-control ml-2 clearField",
                                    @id = "RMCatPRDetails",
                                    @onchange = "RMCatChange()",
                                    @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                                })
                        </div>
                        <div class="form-group ml-3">
                            <label for="UOMPRDetails">UOM</label>
                            @Html.DropDownListFor(m => m.UOM, new SelectList(@ViewBag.ListUOM, "DataStringValueField", "DataTextField", "All"), new
                                {
                                    @class = "form-control ml-2 requiredValidation clearField",
                                    @id = "UOMPRDetails",
                                    @type = "select",
                                    @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                                })
                        </div>

                    </div>
                </div>
            </div>

            <div class="row">
                <hr style="width:100%" />
            </div>

            <div class="row">
                <div class="col-md-12">

                    <table class="table table-bordered tableRadio" id="tableRM">
                        <thead>
                            <tr>
                                <td width="5%">
                                    SN
                                </td>
                                <td width="15%">
                                    RM Description
                                </td>
                                <td width="7%">
                                    RM Grade
                                </td>
                                <td width="7%">
                                    RM Hardness
                                </td>
                                <td width="6%">
                                    PSL Level
                                </td>
                                <td width="7%">
                                    OD
                                </td>
                                <td width="7%">
                                    Wall Thickness
                                </td>
                                <td width="7%">
                                    Length
                                </td>
                                <td width="7%">
                                    Qty Required (Nos)
                                </td>
                                <td width="7%">
                                    Qty in Stock (Nos)
                                </td>
                                <td width="7%">
                                    Purchase Qty (Nos)
                                </td>
                                <td width="7%">
                                    Unit Price
                                </td>
                                <td width="7%">
                                    Total Price
                                </td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td width="5%">
                                    <label class="RMSN">1</label>
                                </td>
                                <td>
                                    <input name="RMdescription" type="text" class="form-control RMdescription" />
                                </td>
                                <td>
                                    <input name="RMgrade" type="text" class="form-control RMgrade" />
                                </td>
                                <td>
                                    <input name="RMHardness" type="text" class="form-control RMHardness" />
                                </td>
                                <td width="3%">
                                    <select name="PSLlevel" class="form-control RMPSLlevel">
                                        <option value="I">I</option>
                                        <option value="II">II</option>
                                    </select>
                                </td>
                                <td>
                                    <input name="OD" type="text" class="form-control RMOD" onkeypress="return validateDecimalNumbers(this, event);" />
                                </td>
                                <td>
                                    <input name="WT" type="text" class="form-control RMWT" onkeypress="return validateDecimalNumbers(this, event);" />
                                </td>
                                <td>
                                    <input name="Len" type="text" class="form-control RMLen" onkeypress="return validateDecimalNumbers(this, event);" />
                                </td>
                                <td>
                                    <input name="QtyReqd" type="text" class="form-control RMQtyReqd" onkeypress="return AllowNumbers(event);" />
                                </td>
                                <td>
                                    <input name="QtyStock" type="text" class="form-control RMQtyStock" onkeypress="return AllowNumbers(event);" />
                                </td>
                                <td>
                                    <input name="PRqty" type="text" class="form-control RMPRqty" onkeypress="return AllowNumbers(event);" onkeyup="CalcTotalForPR(this)" />
                                </td>
                                <td>
                                    <input name="UnitPrice" type="text" class="form-control RMUnitPrice" onkeyup="CalcTotalForPR(this);" onkeypress="return validateDecimalNumbers(this, event);" />
                                </td>
                                <td>
                                    <input name="TotalPrice" type="text" readonly="readonly" class="form-control RMTotalPrice" />
                                </td>
                                <td>
                                    <a href="#" id="addNewRM" class="btn btn-info btn-sm" onclick="addNewRM(event)">Add Row</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table tableRadio" id="tableBOI">
                        <thead>
                            <tr>
                                <td>
                                    SN
                                </td>
                                @*<td>
                                        RM Code
                                    </td>*@
                                <td>
                                    RM Description
                                </td>
                                <td>
                                    RM Grade
                                </td>
                                <td>
                                    PS Level
                                </td>
                                <td>
                                    Qty Required (Nos)
                                </td>
                                <td>
                                    Qty in Stock (Nos)
                                </td>
                                <td>
                                    Purchase Qty (Nos)
                                </td>
                                <td>
                                    Unit Price
                                </td>
                                <td>
                                    Total Price
                                </td>
                                <td>
                                    HSN
                                </td>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <table class="table tableRadio" id="tableJW">
                        <thead>
                            <tr>
                                <td>
                                    SN
                                </td>
                                @*<td>
                                        RM Code
                                    </td>*@
                                <td>
                                    Item Description
                                </td>
                                <td>
                                    RM Grade
                                </td>
                                <td>
                                    JW Qty (Nos)
                                </td>
                                <td>
                                    Unit Price
                                </td>
                                <td>
                                    Total Price
                                </td>
                                <td>
                                    WIP No
                                </td>
                                <td>
                                    DRG No
                                </td>
                                <td>
                                    Opn Code
                                </td>
                                <td>
                                    Process Name
                                </td>
                                <td>
                                    EDR
                                </td>
                                <td>
                                    OPN Time
                                </td>
                                <td>
                                    HSN
                                </td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="tableRadio" id="tableGI" style="width: 70%;">
                        <thead>
                            <tr>
                                <td style="width: 6%;">
                                    SN
                                </td>
                                <td style="width: 36%;">
                                    Item Description
                                </td>
                                <td style="width: 8%;">
                                    Qty (Nos)
                                </td>
                                <td style="width: 10%;">
                                    Unit Price
                                </td>
                                <td style="width: 11%;">
                                    Total Price
                                </td>
                                @*<td width="16%">
                                        Required Dly. Date
                                    </td>*@
                                <td style="width: 5%;">
                                    HSN
                                </td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="tableRadio" id="tableC" style="width: 70%;">
                        <thead>
                            <tr>
                                <td style="width: 6%;">
                                    SN
                                </td>
                                <td style="width: 36%;">
                                    Item Description
                                </td>
                                <td style="width: 8%;">
                                    Qty (Nos)
                                </td>
                                <td style="width: 10%;">
                                    Unit Price
                                </td>
                                <td style="width: 11%;">
                                    Total Price
                                </td>
                                @*<td width="16%">
                                        Required Dly. Date
                                    </td>*@
                                <td style="width: 5%;">
                                    HSN
                                </td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="tableRadio" id="tableO" style="width: 70%;">
                        <thead>
                            <tr>
                                <td style="width: 6%;">
                                    SN
                                </td>
                                <td style="width: 36%;">
                                    Item Description
                                </td>
                                <td style="width: 8%;">
                                    Qty (Nos)
                                </td>
                                <td style="width: 10%;">
                                    Unit Price
                                </td>
                                <td style="width: 11%;">
                                    Total Price
                                </td>
                                @*<td width="16%">
                                        Required Dly. Date
                                    </td>*@
                                <td style="width: 5%;">
                                    HSN
                                </td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </div>


            <div class="row">
                <hr style="width:100%" />
                <h4 class="control-label" style="margin-left:10px; font-size: 20px">Terms and conditions</h4>
                <hr style="width:100%" />
            </div>

            <table class="table">
                <tr>
                    <td>
                        Delivery Date
                    </td>
                    <td>
                        @Html.TextBoxFor(m => m.DeliveryDate, new
                           {
                               @class = "form-control requiredValidation NoEndDate",
                               autocomplete = "off",
                               @id = "DeliveryDatePRDetails",
                               @placeholder = "dd/MM/yyyy",
                               @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                           })
                    </td>
                    <td class="text-right">
                        Supply Terms
                    </td>
                    <td>
                        @Html.DropDownListFor(m => m.SupplyTerms, new SelectList(@ViewBag.ListSupplyTerms, "DataStringValueField", "DataTextField", "Select"),
                        new
                            {
                                @class = "form-control ml-2 requiredValidation clearField",
                                @id = "SupplyTermsPRDetails",
                                @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                            })
                    </td>
                </tr>
                <tr>
                    <td>
                        Delivery Terms
                    </td>
                    <td>
                        @Html.TextBoxFor(m => m.DeliveryTerms, new
                        {
                            @class = "form-control requiredValidation",
                            @id = "PRDetailsDeliveryTerms",
                            @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                        })
                    </td>
                    <td class="text-right">
                        Payment Terms
                    </td>
                    <td>
                        @Html.TextBoxFor(m => m.PaymentTerms, null, new
                        {
                            @class = "form-control requiredValidation",
                            @id = "PRDetailsPaymentTerms",
                            @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                        })
                    </td>
                </tr>
                <tr>
                    <td>
                        Certificates
                    </td>
                    <td>
                        @Html.TextBoxFor(m => m.Certificates, new
                        {
                            @class = "form-control requiredValidation",
                            @id = "PRDetailsCertificates",
                            @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                        })
                    </td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>
                        Approved Suppliers
                    </td>
                    <td>
                        @Html.DropDownListFor(m => m.ApprovedSupplier1, new SelectList(@ViewBag.ListSupplier, "DataStringValueField", "DataTextField", "Select"), new
                               {
                                   @class = "form-control ml-2 requiredValidation clearField",
                                   @id = "PRApprovedSupplier1",
                                   @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                               })
                    </td>
                    <td>
                        @Html.DropDownListFor(m => m.ApprovedSupplier2, new SelectList(@ViewBag.ListSupplier, "DataStringValueField", "DataTextField", "Select"), new
                               {
                                   @class = "form-control ml-2 requiredValidation clearField",
                                   @id = "PRApprovedSupplier2",
                                   @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                               })
                    </td>
                    <td>
                        @Html.DropDownListFor(m => m.PRFavouredOn, new SelectList(@ViewBag.ListSupplier, "DataStringValueField", "DataTextField", "Select"), new
                   {
                       @class = "form-control ml-2 requiredValidation clearField",
                       @id = "PRDetailsPRFavouredOn",
                       @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                   })
                    </td>
                </tr>
                <tr>
                    <td class="text-center">
                        <img id="imgRequestedBy" src="~/Images/Sign/@Model.EntryPersonSign" alt="Signature" width="50px" height="50px" />
                    </td>
                    <td class="text-center">
                        <img id="imgStoreEx" src="~/Images/Sign/@Model.ApprovePerson1Sign" alt="Signature" width="50px" height="50px" />
                    </td>
                    <td class="text-center">
                        <img id="imgApproverSign" src="~/Images/Sign/@Model.ApprovePerson2Sign" alt="Signature" width="50px" height="50px" />
                    </td>
                </tr>
                <tr>
                    <td class="text-center">
                        <input type="checkbox" id="RequestedBy" onchange="showRequestedSign('RequestedBy')" />
                        <label id="lblRequestedBy">Requested By</label>
                    </td>
                    <td class="text-center">
                        <input type="checkbox" id="StoreEx" onchange="showRequestedSign('StoreEx','1')" />
                        <label id="lblStoreEx">Sign of Store Executive</label>
                    </td>
                    <td class="text-center">
                        <input type="checkbox" id="ApproverSign" onchange="showRequestedSign('ApproverSign','2')" />
                        <label id="lblApproverSign">Sign of Approver</label>
                    </td>
                    <td>
                        <button id="btnApprove" onclick="funcApproveReject('Approved')" class="btn btn-info btn-md">Approve</button>
                        <button id="btnReject" onclick="funcApproveReject('Rejected')" class="btn btn-info btn-md ml-2">Reject</button>
                    </td>
                </tr>
            </table>

            <div class="row">
                <h4 class="col-md-12 control-label m-0 text-white" style="margin: 5px;font-size: 20px;line-height: 40px; background-color: #36A3F7">
                    To be filled by Purchase Deptt.
                </h4>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <table class="table table-bordered">
                        @*<tr>
                                <td></td>
                                <td>
                                    Status of PR
                                </td>
                                <td>
                                    @Html.DropDownListFor(m => m.ApprovedReject, new SelectList(@ViewBag.ListAcceptReject, "DataStringValueField", "DataTextField", "Select"), new
                               {
                                   @class = "form-control ml-2 requiredValidation clearField",
                                   @id = "ApproveRejectPRDetails",
                                   @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                               })
                                </td>
                                <td></td>
                            </tr>*@
                        <tr>
                            <td></td>
                            <td>
                                Did you communicate the status to requested department?
                            </td>
                            <td>
                                @Html.DropDownListFor(m => m.Communicate, new SelectList(@ViewBag.ListCommunicate, "DataStringValueField", "DataTextField", "Select"), new
                                {
                                    @class = "form-control ml-2 clearField",
                                    @id = "CommunicatePRDetails",
                                    @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                                })
                            </td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                P.O. No.
                            </td>
                            <td>
                                @Html.TextBoxFor(m => m.POno, new
                                {
                                    @class = "form-control ml-3",
                                    @id = "PONoPRDetails",
                                    @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                                })
                            </td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                PR Requested On
                            </td>
                            <td>
                                @Html.TextBoxFor(m => m.PRdate, new
                                {
                                    @class = "form-control ml-2 clearField",
                                    @id = "PRDetailsPRRequestedOn",
                                    @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                                })
                            </td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>
                                Expected Delivery Date
                            </td>
                            <td>
                                @Html.TextBoxFor(m => m.ExpectedDeliveryDate, new
                                {
                                    @class = "form-control ml-3 NoEndDate",
                                    @placeholder = "dd/MM/yyyy",
                                    autocomplete = "off",
                                    @id = "ExpectedDeliveryDatePRDetails",
                                    @onfocusout = "return ValidateRequiredFieldsOnFocusOut(this)"
                                })
                            </td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td class="text-right"></td>
                            <td class="text-center">
                                <img id="imgPurchaseExecSign" src="/Images/Sign/@ViewBag.PurchaseRequest" alt="Signature" width="50px" height="50px" />
                            </td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td class="text-right"></td>
                            <td class="text-center">
                                <label id="lblPurchaseExecSign"> Sign of Purchase Executive </label>
                            </td>
                            <td></td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12 pt-4 text-center">
                    <button id="SavePRDetailButton" style="font-size:18px" type="button" class="btn btn-success btn-sm" onclick="SavePRDetails(event)">Save</button>
                    <button id="btnSavePurchase" style="font-size:18px" type="button" class="btn btn-success btn-sm" onclick="funcSavePurchaseDetails()">Save</button>
                    <button style="font-size:18px" type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </form>
</div>

<script>

    $(document).ready(function () {

        window.UpdateApproveReject = '@Url.Action("UpdateApproveReject", "MRM")';
        window.ChangeEndUseNoForQuoteOrSoNo = '@Url.Action("ChangeEndUseNoForQuoteOrSoNo", "MRM")';
        window.ChangeEndUseNoForNonPO = '@Url.Action("ChangeEndUseNoForNonPO", "MRM")';
        window.ChangeRMCat = '@Url.Action("ChangeRMCat", "MRM")';
        window.SavePurchaseDetails = '@Url.Action("SavePurchaseDetails", "MRM")';

        $('#QuoteTypeDiv').hide();

        $('#tableRM').hide();
        $('#tableBOI').hide();
        $('#tableJW').hide();
        $('#tableGI').hide();
        $('#tableC').hide();
        $('#tableO').hide();


        $('#RequestedBy').show();
        $('#StoreEx').hide();
        $('#ApproverSign').hide();

        $('#imgRequestedBy').hide();
        $('#imgStoreEx').hide();
        $('#imgApproverSign').hide();

        $('#btnApprove').hide();
        $('#btnReject').hide();
        $('#imgPurchaseExecSign').hide();
        $('#lblPurchaseExecSign').hide();
        $('#btnSavePurchase').hide();
        $('#HiddenPRStatusPRDetails').val('UnderProcess');
        $('#PRDetailsPRFavouredOn').attr('disabled', 'true');
        $('#SavePRDetailButton').show();

        var DeptNameField = '@ViewBag.DeptName.ToString()';
        if (DeptNameField == 'Management') {
            $('#imgRequestedBy').show();
            $('#imgStoreEx').show();
            $('#imgApproverSign').hide();

            $('#RequestedBy').hide();
            $('#StoreEx').hide();
            $('#PRDetailsPRFavouredOn').attr('class', 'form-control');

            let Status = $('#HiddenSignStatusPRDetails').val();
            if (Status == 'Approved1') {
                $('#ApproverSign').show();
                $('#PRDetailsPRFavouredOn').removeAttr('disabled');
            }
            else if (Status == 'Approved2') {
                $('#imgApproverSign').show();
                $('#PRDetailsPRFavouredOn').attr('disabled','true');
            }


            //$('#RequestedBy').prop('checked', true);
            //$('#StoreEx').prop('checked', true);
            $('#HiddenSignStatusPRDetails').val('Approved2');
        }
        else if (DeptNameField == 'Stores') {
            //$('#RequestedBy').prop('checked', true);
            if ($('#HiddenSignStatusPRDetails').val() == '') {
                $('#RequestedBy').show();
                $('#imgRequestedBy').hide();
                $('#StoreEx').hide();
                $('#lblStoreEx').hide();
            }
            else {
                $('#RequestedBy').hide();
                $('#imgRequestedBy').show();
                $('#StoreEx').show();
                $('#lblStoreEx').show();
            }

            $('#ApproverSign').hide();
            $('#imgApproverSign').hide();
            let approvePerson1 = '@Model.ApprovePerson1';
            let updateStoreSign = '@Model.ApprovePerson1Sign';

            if (approvePerson1!='' && updateStoreSign != '') {
                $('#imgStoreEx').show();
                $('#StoreEx').prop('checked', true);
            }
            else {
                $('#imgStoreEx').hide();
                $('#StoreEx').prop('checked',false);
            }

            $('#HiddenSignStatusPRDetails').val('Approved1');
        }
        else if (DeptNameField == 'Purchase') {
            $('#RequestedBy').hide();
            $('#imgRequestedBy').show();
            $('#imgStoreEx').show();
            $('#imgApproverSign').show();
            $('#imgPurchaseExecSign').show();
            $('#lblPurchaseExecSign').show();

            $('#CommunicatePRDetails').removeAttr('disabled');
            $('#PONoPRDetails').removeAttr('disabled');
            //$('#PRDetailsPRRequestedOn').removeAttr('disabled');
            $('#ExpectedDeliveryDatePRDetails').removeAttr('disabled');
            $('#SavePRDetailButton').hide();
            $('#btnSavePurchase').show();

            $('#HiddenSignStatusPRDetails').val('PurchaseApprove');
        }
        else {
            $('#HiddenSignStatusPRDetails').val('Entry');
        }


    });

    //LEASE DATE AND EXP LEASE DATE VALIDATION
    $('.NoEndDate').datepicker({

        format: 'dd/mm/yyyy',
        autoclose: true,
        changeMonth: true,
        changeYear: true,
        endDate: '',
    });
    $('.CurrentEndDate').datepicker({

        format: 'dd/mm/yyyy',
        autoclose: true,
        changeMonth: true,
        changeYear: true,
        endDate: 'today',
    });
</script>

