@using NtierMvc.Model
@using NtierMvc.Infrastructure
@model NtierMvc.Model.QuotationEntityDetails
@{
    ViewBag.Title = "Quotation Details";
}

@*@section PageScripts{
    <script src="~/Scripts/CustomJS/Staff.js?@ViewBag.ReleaseVersion"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css">
}*@

<style type="text/css">
    form .form-group .fileinput {
        width: 100%;
    }

    .modal-header .close {
        padding: 0px !important;
        margin: 0px !important;
        margin-top: 10px !important;
    }

    form .form-group .error {
        display: none;
        font-size: 12px;
        font-style: italic;
        color: #e9573f;
    }

    form .form-group .validationError {
        display: none;
        font-size: 12px;
        font-style: italic;
        color: #e9573f;
    }

    .errorClass {
        border: 1px solid red !important;
    }

    .ro-backcolor {
        background-color: #fff !important;
    }
</style>

<div class="row mt-3">
    <div class="col-md-12">
        <div class="form-group text-right">
            <button id="btnAdd" type="button" class="btn btn-outline-primary btn-sm btn-Add-QuotationDetails" style="float: left;"><i class="fa fa-plus"></i> Add Quotation Details</button>
        </div>
    </div>
</div>
<div class="row mt-1">
    <div class="col-md-12">
        <div class="form-group text-right">
            @if (@ViewBag.PagewiseAccessEntity != null && @ViewBag.PagewiseAccessEntity.IsEditAllowed)
            {
                <button type="button" id="btnSubmit" class="btn btn-primary">Add To List</button>
            }
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <div class="table-responsive">
            <table id="tblQuotationDetailsDetails" class="table dva-table dva-tborder agencygrid">
                <thead>
                    <tr>
                        <th style="min-width:140px;">View/Edit/Delete</th>
                        <th style="min-width:140px;">
                            USER_INITIAL
                        </th>
                        <th style="min-width:140px;">
                            UNIT_NO
                        </th>
                        <th style="min-width:140px;">
                            VENDOR_ID
                        </th>
                        <th style="min-width:140px;">
                            VENDOR_NAME
                        </th>
                        <th style="min-width:140px;">
                            QUOTE_TYPE
                        </th>
                        <th style="min-width:140px;">
                            FILE NO.
                        </th>
                        <th style="min-width:140px;">
                            ENQ_REF
                        </th>
                        <th style="min-width:140px;">
                            ENQ_DT
                        </th>
                        <th style="min-width:140px;">
                            QUOTE_NO
                        </th>
                        <th style="min-width:140px;">
                            QUOTE_DATE
                        </th>
                        <th style="min-width:140px;">
                            QUOTE_VALIDITY
                        </th>
                        <th style="min-width:140px;">
                            BG_REQ
                        </th>
                        <th style="min-width:140px;">
                            INSPECTION
                        </th>
                        <th style="min-width:140px;">
                            REMARKS
                        </th>                        
                    </tr>
                </thead>
                <tbody>
                    @for (int index = 0; index < Model.lstQuoteEntity.Count; index++)
                    {
                    <tr data-keyvalue="@Model.lstQuoteEntity[index].QuotationId">
                        <td>
                            <button type="button" class="btn btn-outline-primary btn-sm btn-view-QuotationDetails" data-toggle="tooltip" data-placement="bottom" title="VIEW">
                                <i class="fa fa-eye"></i>
                            </button>
                            <button type="button" class="btn btn-outline-primary btn-sm btn-Edit-QuotationDetails" data-toggle="tooltip" data-placement="bottom" title="EDIT">
                                <i class="fa fa-edit"></i>
                            </button>
                            <a href="@Url.Action("DeleteQuotationDetail", "Quotation")/@Model.lstQuoteEntity[index].QuotationId" class="btn btn-outline-danger btn-sm"><i class="fa fa-trash"></i></a>
                        </td>
                        @*<td>
            @(index + 1)
        </td>*@
                        <td>
                            <span class="spnProfileDetail">
                                @Html.HiddenFor(m => m.lstQuoteEntity[index].QuotationId, new { id = "QuotationId" })
                                @Model.lstQuoteEntity[index].UserInitial
                            </span>
                        </td>
                        <td><span class="spnProfileDetail">@Model.lstQuoteEntity[index].UnitNo</span></td>
                        <td><span class="spnProfileDetail">@Model.lstQuoteEntity[index].VendorId</span></td>
                        <td><span class="spnProfileDetail">@Model.lstQuoteEntity[index].VendorName</span></td>
                        <td><span class="spnProfileDetail">@Model.lstQuoteEntity[index].QuoteType</span></td>
                        <td><span class="spnProfileDetail">@Model.lstQuoteEntity[index].FileNo</span></td>
                        <td><span class="spnProfileDetail">@Model.lstQuoteEntity[index].EnqRef</span></td>
                        <td><span class="spnProfileDetail">@Model.lstQuoteEntity[index].EnqDt</span></td>
                        <td><span class="spnProfileDetail">@Model.lstQuoteEntity[index].QuoteNo</span></td>
                        <td><span class="spnProfileDetail">@Model.lstQuoteEntity[index].QuoteDate</span></td>
                        <td><span class="spnProfileDetail">@Model.lstQuoteEntity[index].QuoteValidity</span></td>
                        <td><span class="spnProfileDetail">@Model.lstQuoteEntity[index].BgReq</span></td>
                        <td><span class="spnProfileDetail">@Model.lstQuoteEntity[index].Inspection</span></td>
                        <td><span class="spnProfileDetail">@Model.lstQuoteEntity[index].Remarks</span></td>

                    </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="modal" id="addQuotationDetails" tabindex="-1" role="dialog">
    @using (Ajax.BeginForm(actionName: "SaveQuotationDetails", controllerName: "Quotation", ajaxOptions: new AjaxOptions
    {
        HttpMethod = "POST"
        // OnSuccess = "BuildingSpaceDetails.UploadFiles"
    },
            routeValues: null,
            htmlAttributes: new { id = "frmQuotationDetails" }))
    {
        <div class="modal-dialog" style="width:80%; max-width: 80%;" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    @*@Html.HiddenFor(m => m.TrnBuildingHdrId)*@
                    <h5 class="modal-title">Add Quotation Details</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div id="div-Staff-details" class="modal-body">

                </div>
                <div class="modal-footer">
                    <button type="submit" id="btnSubmit" class="btn btn-primary">Save</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    }
</div>


<div class="modal fade" id="add_details" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
</div>
<script src="~/Scripts/jquery.Datatable.js"></script>
@*<script src="~/Scripts/CustomJS/QuotationDetails.js"></script>*@
<script type="text/javascript">

    $(document).ready(function () {
        $('[data-toggle="tooltip"]').tooltip();
    });

</script>
<script type="text/javascript">
        $(document).ready(function () {
            window.QuotationDetailsPopup = '@Url.Action("QuotationPopup", "Quotation")';

            var Data = '@TempData["StatusMsg"]';
            if (Data === "INSERTED SUCCESSFULLY" || Data === "UPDATED SUCCESSFULLY")
            {
                alertNotification(Data);
            }

        })
        $(function () {
            QuotationDetails.Load();
        });
</script>
